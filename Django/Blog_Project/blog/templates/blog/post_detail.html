{% extends 'blog/base.html' %}

{% block content %}
<h1>{{ post.title }}</h1>
<p>{{ post.excerpt }}</p>
<p>{{ post.content }}</p>
<p>Autor: {{ post.author }}</p>
<p>Tags:
    {% for tag in post.tags.all %}
        <span>{{ tag.caption }}</span>{% if not forloop.last %}, {% endif %}
    {% endfor %}
</p>

{% if post.image %}
    <img src="{{ post.image.url }}" alt="{{ post.title }}" style="max-width:500px;">
{% endif %}

<hr>
<h3>Comentarios</h3>
{% for comment in comments %}
    <p><strong>{{ comment.user_name }}</strong>: {{ comment.text }}</p>
{% empty %}
    <p>No hay comentarios todavía.</p>
{% endfor %}

<h3>Deja un comentario</h3>
<form method="post">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit">Enviar</button>
</form>

<hr>
<h3>Leer después</h3>
<form action="{% url 'read-later' post.id %}" method="post">
    {% csrf_token %}
    {% if is_saved_for_later %}
        <button type="submit">Eliminar de Lectura Posterior</button>
    {% else %}
        <button type="submit">Guardar para Leer Después</button>
    {% endif %}
</form>
{% endblock %}
